<!-- Admin Navbar Fragment -->
<nav th:fragment="admin-navbar" class="navbar navbar-expand-lg navbar-dark shadow-lg eco-navbar-modern">
    <div class="container-fluid">
        <a class="navbar-brand eco-brand-modern fw-bold text-white" href="/admin/portal_administrador">
            <i class="bi bi-leaf-fill text-white me-2"></i>
            EcoVivaShop Admin
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarAdmin" aria-label="Abrir menú de navegación">
            <span class="navbar-toggler-icon"></span>
            <span class="visually-hidden">Abrir menú de navegación</span>
        </button>
        <div class="collapse navbar-collapse" id="navbarAdmin">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link text-white fw-bold" href="/admin/dashboard"
                       style="background: linear-gradient(45deg, #28a745, #20c997); border-radius: 20px; margin: 0 5px; padding: 8px 15px;">
                        <i class="bi bi-speedometer2 me-1"></i>Panel de Control
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/clientes"
                       style="border-radius: 20px; margin: 0 5px; padding: 8px 15px; transition: all 0.3s;"
                       onmouseover="this.style.background='rgba(52, 152, 219, 0.2)'"
                       onmouseout="this.style.background='transparent'">
                        <i class="bi bi-people me-1"></i>Clientes
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/productos"
                       style="border-radius: 20px; margin: 0 5px; padding: 8px 15px; transition: all 0.3s;"
                       onmouseover="this.style.background='rgba(52, 152, 219, 0.2)'"
                       onmouseout="this.style.background='transparent'">
                        <i class="bi bi-box-seam me-1"></i>Productos
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/pedidos"
                       style="border-radius: 20px; margin: 0 5px; padding: 8px 15px; transition: all 0.3s;"
                       onmouseover="this.style.background='rgba(52, 152, 219, 0.2)'"
                       onmouseout="this.style.background='transparent'">
                        <i class="bi bi-cart-check me-1"></i>Pedidos
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" style="border-radius: 20px; margin: 0 5px; padding: 8px 15px;">
                        <i class="bi bi-gear me-1"></i>Gestión
                    </a>
                    <ul class="dropdown-menu shadow-lg border-0" style="background: linear-gradient(135deg, #ffffff, #f8f9fa); border-radius: 15px;">
                        <li><a class="dropdown-item" href="/admin/portal_administrador" style="border-radius: 10px; margin: 5px;">
                            <i class="bi bi-house me-2 text-primary"></i>Portal Principal
                        </a></li>
                        <li><hr class="dropdown-divider" style="margin: 8px 5px;"></li>
                        <li><a class="dropdown-item" href="/admin/registro-admin" style="border-radius: 10px; margin: 5px;">
                            <i class="bi bi-person-plus me-2 text-success"></i>Nuevo Admin
                        </a></li>
                        <li><a class="dropdown-item" href="/admin/reportes" style="border-radius: 10px; margin: 5px;">
                            <i class="bi bi-graph-up me-2 text-info"></i>Reportes
                        </a></li>
                        <li><a class="dropdown-item" href="/admin/configuracion" style="border-radius: 10px; margin: 5px;">
                            <i class="bi bi-sliders me-2 text-warning"></i>Configuración
                        </a></li>
                    </ul>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center"
                       href="#" role="button" data-bs-toggle="dropdown" id="userDropdownBtn">
                        <div class="rounded-circle overflow-hidden me-2" style="width: 32px; height: 32px;">
                            <!-- Imagen del perfil del administrador autenticado -->
                            <img th:if="${usuario != null and usuario.idUsuario != null}"
                                 th:src="'/api/imagenes/perfil/' + ${usuario.idUsuario}"
                                 alt="Foto de perfil"
                                 class="img-fluid w-100 h-100"
                                 style="object-fit: cover;"
                                 onerror="this.src='/img/default-profile.svg'">
                            <!-- Imagen por defecto si no hay usuario autenticado -->
                            <img th:unless="${usuario != null and usuario.idUsuario != null}"
                                 src="/img/default-profile.svg"
                                 alt="Foto de perfil por defecto"
                                 class="img-fluid w-100 h-100"
                                 style="object-fit: cover;">
                        </div>
                        <span th:if="${usuario != null and usuario.nombre != null}"
                              th:text="${usuario.nombre}">Admin</span>
                        <span th:unless="${usuario != null and usuario.nombre != null}">Admin</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0" style="border-radius: 15px;">
                        <li><a class="dropdown-item" href="/admin/perfil">
                            <i class="bi bi-person-circle me-2 text-primary"></i>Mi Perfil
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <form th:action="@{/logout}" method="post" class="d-inline">
                                <button type="submit" class="dropdown-item">
                                    <i class="bi bi-box-arrow-right me-2 text-danger"></i>Cerrar Sesión
                                </button>
                            </form>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
