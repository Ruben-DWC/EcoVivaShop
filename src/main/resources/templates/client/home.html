<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Inicio | EcoVivaShop')}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Inicio | EcoVivaShop</title>
</head>
<body class="eco-bg">
    <!-- Navbar usando fragment del cliente -->
    <div th:replace="~{fragments/client-navbar :: client-navbar}"></div>    <main class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <!-- Alerta de pedido reciente (se muestra dinámicamente con JavaScript) -->
                <div id="recentOrderAlert" class="alert alert-success border-0 shadow-sm mb-4 order-alert-hidden">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-check-circle-fill fs-3 me-3"></i>
                        <div class="flex-grow-1">
                            <h5 class="alert-heading mb-2">¡Pedido Confirmado!</h5>
                            <p class="mb-2">Tu pedido <strong id="orderNumber"></strong> ha sido registrado exitosamente.</p>
                            <div class="d-flex gap-2">
                                <a href="/client/confirmacion" class="btn btn-success btn-sm">
                                    <i class="bi bi-eye me-1"></i>Ver Detalles
                                </a>
                                <a href="/client/pedidos" class="btn btn-outline-success btn-sm">
                                    <i class="bi bi-list-ul me-1"></i>Mis Pedidos
                                </a>
                                <button class="btn btn-outline-secondary btn-sm" onclick="dismissOrderAlert()" aria-label="Cerrar alerta" title="Cerrar alerta">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>                <!-- Hero Section -->
                <div class="card shadow-lg border-0 rounded-4 mb-4" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                    <div class="card-body p-5 text-center">
                        <div class="d-flex align-items-center justify-content-center mb-4">
                            <i class="bi bi-tree-fill display-4 me-3"></i>
                            <div>
                                <h1 class="fw-bold mb-2">
                                    ¡Bienvenido, <span th:text="${usuario?.nombreCompleto ?: usuario?.email ?: 'Cliente'}">Cliente</span>!
                                </h1>
                                <p class="mb-0 opacity-75">
                                    <i class="bi bi-envelope me-2"></i>
                                    <span th:text="${usuario?.email}">correo@ejemplo.com</span>
                                </p>
                            </div>
                        </div>
                        <p class="lead mb-4">Descubre productos eco-sostenibles y únete a la revolución verde. Tu compra hace la diferencia. 🌱</p>
                        <div class="d-flex gap-3 justify-content-center flex-wrap">
                            <a href="/client/catalogo" class="btn btn-light btn-lg px-4 py-2">
                                <i class="bi bi-grid-fill me-2"></i>Explorar Productos
                            </a>
                            <a href="/client/suscripcion" class="btn btn-outline-light btn-lg px-4 py-2">
                                <i class="bi bi-star-fill me-2"></i>Suscripción Premium
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Features Grid -->
                <div class="card shadow-sm border-0 rounded-4">
                    <div class="card-body p-4">
                        <h3 class="text-center fw-bold text-success mb-4">
                            <i class="bi bi-compass me-2"></i>Panel de Control Personal
                        </h3>                          <div class="row g-4 mt-2">
                            <div class="col-md-4">
                                <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #e8f5e8, #f0f9f0); border-left: 4px solid #28a745 !important;">
                                    <div class="card-body text-center p-4">
                                        <div class="bg-success bg-gradient rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="bi bi-bag-check-fill text-white fs-3"></i>
                                        </div>
                                        <h5 class="fw-bold text-success">Catálogo Eco</h5>
                                        <p class="text-muted small">Productos sostenibles y responsables</p>
                                        <a href="/client/catalogo" class="btn btn-success btn-sm rounded-pill px-3">
                                            <i class="bi bi-arrow-right me-1"></i>Explorar
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #e3f2fd, #f0f8ff); border-left: 4px solid #17a2b8 !important;">
                                    <div class="card-body text-center p-4">
                                        <div class="bg-info bg-gradient rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="bi bi-list-ul text-white fs-3"></i>
                                        </div>
                                        <h5 class="fw-bold text-info">Mis Pedidos</h5>
                                        <p class="text-muted small">Historial y seguimiento</p>
                                        <a href="/client/pedidos" class="btn btn-info btn-sm rounded-pill px-3">
                                            <i class="bi bi-arrow-right me-1"></i>Ver Todo
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #fff3cd, #fef9e7); border-left: 4px solid #ffc107 !important;">
                                    <div class="card-body text-center p-4">
                                        <div class="bg-warning bg-gradient rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="bi bi-star-fill text-white fs-3"></i>
                                        </div>
                                        <h5 class="fw-bold text-warning">Premium</h5>
                                        <p class="text-muted small">Beneficios exclusivos</p>
                                        <a href="/client/suscripcion" class="btn btn-warning btn-sm rounded-pill px-3">
                                            <i class="bi bi-arrow-right me-1"></i>Suscribirse
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row g-4 mt-2">
                            <div class="col-md-6">
                                <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #f8d7da, #fdeced); border-left: 4px solid #dc3545 !important;">
                                    <div class="card-body text-center p-4">
                                        <div class="bg-danger bg-gradient rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="bi bi-person-circle text-white fs-3"></i>
                                        </div>
                                        <h5 class="fw-bold text-danger">Mi Perfil</h5>
                                        <p class="text-muted small">Gestiona tu información personal y configuración</p>
                                        <a href="/client/perfil" class="btn btn-outline-danger btn-sm rounded-pill px-3">
                                            <i class="bi bi-arrow-right me-1"></i>Configurar
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #d1ecf1, #e8f6f8); border-left: 4px solid #6f42c1 !important;">
                                    <div class="card-body text-center p-4">
                                        <div class="bg-primary bg-gradient rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                            <i class="bi bi-cart-fill text-white fs-3"></i>
                                        </div>
                                        <h5 class="fw-bold text-primary">Mi Carrito</h5>
                                        <p class="text-muted small">Productos seleccionados listos para comprar</p>
                                        <a href="/client/carrito" class="btn btn-outline-primary btn-sm rounded-pill px-3">
                                            <i class="bi bi-arrow-right me-1"></i>Ver Carrito
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>    <div th:replace="~{fragments/footer :: footer}"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Verificar si hay información de pedido reciente
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar URL parameter para éxito de pedido
            const urlParams = new URLSearchParams(window.location.search);
            const orderSuccess = urlParams.get('orderSuccess');
            
            // Verificar localStorage para información del pedido
            const recentOrderData = localStorage.getItem('recentOrder');
            
            if (orderSuccess === 'true' || recentOrderData) {
                showRecentOrderAlert(recentOrderData);
                // Limpiar parámetro de URL
                if (orderSuccess) {
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        });

        // Mostrar alerta de pedido reciente
        function showRecentOrderAlert(orderData) {
            const alertElement = document.getElementById('recentOrderAlert');
            const orderNumberElement = document.getElementById('orderNumber');
            
            if (orderData) {
                try {
                    const orderInfo = JSON.parse(orderData);
                    orderNumberElement.textContent = orderInfo.orderNumber;
                } catch (e) {
                    orderNumberElement.textContent = 'ECO-2024-001234';
                }
            } else {
                orderNumberElement.textContent = 'ECO-2024-001234';
            }
            
            // Mostrar alerta con animación
            alertElement.style.display = 'block';
            alertElement.classList.add('fade-in');
            
            // Auto-ocultar después de 10 segundos
            setTimeout(function() {
                if (alertElement.style.display !== 'none') {
                    alertElement.classList.add('fade-out');
                    setTimeout(function() {
                        alertElement.style.display = 'none';
                        localStorage.removeItem('recentOrder');
                    }, 500);
                }
            }, 10000);
        }

        // Descartar alerta de pedido
        function dismissOrderAlert() {
            const alertElement = document.getElementById('recentOrderAlert');
            alertElement.classList.add('fade-out');
            setTimeout(function() {
                alertElement.style.display = 'none';
                localStorage.removeItem('recentOrder');
            }, 500);
        }

        // Agregar estilos CSS para animaciones
        const style = document.createElement('style');
        style.textContent = `
            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }
            
            .fade-out {
                animation: fadeOut 0.5s ease-out;
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            @keyframes fadeOut {
                from {
                    opacity: 1;
                    transform: translateY(0);
                }
                to {
                    opacity: 0;
                    transform: translateY(-20px);
                }
            }
            
            .eco-feature-card {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            
            .eco-feature-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>



